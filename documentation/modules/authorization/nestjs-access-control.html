<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Rockets NestJS Access Control – Rockets</title><meta name="msapplication-TileColor" content="#ffffff"/><meta http-equiv="Content-Language" content="en"/><meta name="description" content="Rockets: Rapid Enterprise Development Toolkit"/><meta name="og:description" content="Rockets: Rapid Enterprise Development Toolkit"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://www.rockets.tools/og.png"/><meta name="twitter:site:domain" content="rockets.tools"/><meta name="twitter:url" content="https://www.rockets.tools"/><meta name="og:title" content="Rockets: Rapid Enterprise Development Toolkit"/><meta name="og:image" content="https://www.rockets.tools/og.png"/><meta name="apple-mobile-web-app-title" content="Rockets"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><meta name="msapplication-TileImage" content="/ms-icon-150x150.png"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-E2EF28D6TS"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-E2EF28D6TS', {
              page_path: window.location.pathname,
            });
          </script><link rel="icon" href="data:image/svg+xml;utf8,&lt;svg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 100 100&#x27;&gt;&lt;text x=&#x27;50&#x27; y=&#x27;.9em&#x27; font-size=&#x27;90&#x27; text-anchor=&#x27;middle&#x27;&gt;✦&lt;/text&gt;&lt;style&gt;text{font-family:system-ui,-apple-system,BlinkMacSystemFont,&quot;Segoe UI&quot;,Roboto,&quot;Helvetica Neue&quot;,Arial,&quot;Noto Sans&quot;,sans-serif,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;,&quot;Noto Color Emoji&quot;;fill:black}@media(prefers-color-scheme:dark){text{fill:white}}&lt;/style&gt;&lt;/svg&gt;"/><meta name="theme-color" content="#111111" media="(prefers-color-scheme: dark)"/><meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/><meta name="next-head-count" content="24"/><link rel="preload" href="/_next/static/css/46b2cda46cf189ad.css" as="style"/><link rel="stylesheet" href="/_next/static/css/46b2cda46cf189ad.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-5d375b4bfedf1a40.js" defer=""></script><script src="/_next/static/chunks/pages/_app-979c1ceb2357c7df.js" defer=""></script><script src="/_next/static/chunks/831-7634aeb33d42ab93.js" defer=""></script><script src="/_next/static/chunks/pages/documentation/modules/authorization/nestjs-access-control-a024c8d7585939c1.js" defer=""></script><script src="/_next/static/wxhLgjVNyYNjLMWWwdW-9/_buildManifest.js" defer=""></script><script src="/_next/static/wxhLgjVNyYNjLMWWwdW-9/_ssgManifest.js" defer=""></script><script src="/_next/static/wxhLgjVNyYNjLMWWwdW-9/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d.add('dark')}else{d.style.colorScheme = 'light';d.add('light')}}else if(e){d.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="nextra-container main-container flex flex-col"><div class="nextra-nav-container z-20 sticky top-0 bg-transparent w-full"><div class="nextra-nav-container-blur absolute w-full h-full bg-white dark:bg-dark pointer-events-none"></div><nav class="flex max-w-[90rem] mx-auto items-center left-0 right-0 h-16 pl-[max(env(safe-area-inset-left),1.5rem)] pr-[max(env(safe-area-inset-right),1.5rem)]"><div class="w-full flex items-center mr-2"><a class="no-underline text-current inline-flex items-center hover:opacity-75" href="/"><img class="md:inline object-contain hidden" height="16" width="16" alt="Rockets Logo" src="/assets/rockets-icon.svg"/><span class="mr-2 font-extrabold mx-2 hidden md:inline">Rockets</span></a></div><div class="flex-1"><div class="hidden md:inline-block mr-2"><div class="relative w-full nextra-search md:w-64"><div class="relative flex items-center"><input type="search" class="block w-full px-3 py-2 leading-tight bg-black bg-opacity-[.03] rounded-lg appearance-none focus:outline-none focus:ring hover:bg-opacity-5 transition-colors" placeholder="Search documentation..." spellcheck="false"/><div class="hidden sm:flex absolute inset-y-0 right-0 py-1.5 pr-1.5 select-none pointer-events-none"><kbd class="inline-flex items-center px-2 font-mono text-sm font-medium bg-white text-gray-400 dark:text-gray-800 dark:border-gray-400 border rounded">/</kbd></div></div></div></div></div><a class="text-current p-2" href="https://github.com/conceptadev/rockets" target="_blank" rel="noreferrer"><svg height="24" viewBox="2 2 20 20" fill="none" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Z" fill="currentColor"></path></svg><span class="sr-only">GitHub</span></a><button class="nextra-menu-icon block md:hidden p-2"><svg fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" class=""><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16"></path></g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12h16"></path><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 18h16"></path></g></svg></button><div class="-mr-2"></div></nav></div><div class="max-w-[90rem] w-full mx-auto"><div class="flex flex-1 h-full"><aside class="nextra-sidebar-container fixed flex-shrink-0 w-full md:w-64 md:sticky z-[15] top-16 self-start overflow-y-auto transform-none h-[calc(100vh-4rem)] md:block"><div class="nextra-sidebar select-none w-full h-full md:h-auto pl-[calc(env(safe-area-inset-left)-1.5rem)]"><div class="p-4 min-h-[calc(100vh-4rem-61px)]"><div class="nextra-sidebar-search mb-4 block md:hidden"><div class="relative w-full nextra-search md:w-64"><div class="relative flex items-center"><input type="search" class="block w-full px-3 py-2 leading-tight bg-black bg-opacity-[.03] rounded-lg appearance-none focus:outline-none focus:ring hover:bg-opacity-5 transition-colors" placeholder="Search documentation..." spellcheck="false"/><div class="hidden sm:flex absolute inset-y-0 right-0 py-1.5 pr-1.5 select-none pointer-events-none"><kbd class="inline-flex items-center px-2 font-mono text-sm font-medium bg-white text-gray-400 dark:text-gray-800 dark:border-gray-400 border rounded">/</kbd></div></div></div></div><div class="hidden md:block"><ul><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Documentation<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/getting-started">Getting Started</a></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Modules<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Core<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/core/nestjs-common">Common</a></li><li class=""><a href="/documentation/modules/core/nestjs-exception">Exceptions</a></li><li class=""><a href="/documentation/modules/core/nestjs-event">Events</a></li><li class=""><a href="/documentation/modules/core/nestjs-typeorm-ext">TypeORM Ext</a></li></ul></div></div></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Authentication<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/authentication/nestjs-authentication">Authentication</a></li><li class=""><a href="/documentation/modules/authentication/nestjs-auth-local">Local Login</a></li><li class=""><a href="/documentation/modules/authentication/nestjs-auth-refresh">Refresh Token</a></li><li class=""><a href="/documentation/modules/authentication/nestjs-auth-github">GitHub Login</a></li></ul></div></div></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Authorization<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/authorization/nestjs-auth-jwt">Access Token</a></li><li class="active"><a href="/documentation/modules/authorization/nestjs-access-control">Access Control</a></li></ul></div></div></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Model<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/model/nestjs-user">User</a></li></ul></div></div></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Controller<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/controller/nestjs-crud">CRUD</a></li><li class=""><a href="/documentation/modules/controller/nestjs-swagger-ui">Swagger UI</a></li></ul></div></div></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Notification<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/notification/nestjs-email">Email</a></li></ul></div></div></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Utilities<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/util/nestjs-jwt">JWT</a></li><li class=""><a href="/documentation/modules/util/nestjs-logger">Logger</a></li><li class=""><a href="/documentation/modules/util/nestjs-password">Password</a></li></ul></div></div></li></ul></div></div></li></ul></div></div></li></ul></div><div class="md:hidden"><ul><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Documentation<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/getting-started">Getting Started</a></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Modules<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Core<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/core/nestjs-common">Common</a></li><li class=""><a href="/documentation/modules/core/nestjs-exception">Exceptions</a></li><li class=""><a href="/documentation/modules/core/nestjs-event">Events</a></li><li class=""><a href="/documentation/modules/core/nestjs-typeorm-ext">TypeORM Ext</a></li></ul></div></div></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Authentication<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/authentication/nestjs-authentication">Authentication</a></li><li class=""><a href="/documentation/modules/authentication/nestjs-auth-local">Local Login</a></li><li class=""><a href="/documentation/modules/authentication/nestjs-auth-refresh">Refresh Token</a></li><li class=""><a href="/documentation/modules/authentication/nestjs-auth-github">GitHub Login</a></li></ul></div></div></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Authorization<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/authorization/nestjs-auth-jwt">Access Token</a></li><li class="active"><a href="/documentation/modules/authorization/nestjs-access-control">Access Control</a><ul><li><a href="#installation" class="active-anchor"><span class="flex text-sm"><span class="opacity-25">#</span><span class="mr-2"></span><span class="inline-block">Installation</span></span></a></li><li><a href="#important" class=""><span class="flex text-sm"><span class="opacity-25">#</span><span class="mr-2"></span><span class="inline-block">IMPORTANT</span></span></a></li><li><a href="#example" class=""><span class="flex text-sm"><span class="opacity-25">#</span><span class="mr-2"></span><span class="inline-block">Example</span></span></a></li></ul></li></ul></div></div></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Model<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/model/nestjs-user">User</a></li></ul></div></div></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Controller<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/controller/nestjs-crud">CRUD</a></li><li class=""><a href="/documentation/modules/controller/nestjs-swagger-ui">Swagger UI</a></li></ul></div></div></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Notification<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/notification/nestjs-email">Email</a></li></ul></div></div></li><li class="open"><a class="cursor-pointer"><span class="flex items-center justify-between">Utilities<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="1em" class="ml-2 p-[2px] rounded-sm min-w-[18px] h-[18px] dark:hover:bg-gray-100 hover:bg-gray-800 hover:bg-opacity-5 dark:hover:bg-opacity-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="transition-transform origin-center rotate-90"></path></svg></span></a><div class="transition-all ease-in-out duration-300 overflow-hidden transform-gpu motion-reduce:transition-none"><div class="nextra-collapse-content transition-opacity ease-in-out duration-500 overflow-hidden transform-gpu motion-reduce:transition-none" style="opacity:1"><ul><li class=""><a href="/documentation/modules/util/nestjs-jwt">JWT</a></li><li class=""><a href="/documentation/modules/util/nestjs-logger">Logger</a></li><li class=""><a href="/documentation/modules/util/nestjs-password">Password</a></li></ul></div></div></li></ul></div></div></li></ul></div></div></li></ul></div></div><div class="nextra-sidebar-menu mx-4 border-t dark:border-neutral-800 shadow-[0_-12px_16px_white] dark:shadow-[0_-12px_16px_#111]"><div class="bg-white dark:bg-dark py-4 flex gap-1 pb-4"><div class="relative md:hidden flex-1"><button class="rounded-md px-2 w-full text-left font-medium cursor-default text-xs h-7 transition-colors text-gray-600 dark:text-gray-400 focus:outline-none hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-prime-100 dark:hover:bg-opacity-5 dark:hover:text-gray-50" id="headlessui-listbox-button-undefined" type="button" aria-haspopup="true" aria-expanded="false"><div class="flex items-center gap-2 capitalize"><svg viewBox="0 0 20 20" width="1em" height="1em" fill="currentColor"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path></svg><span>light</span></div></button></div><div class="relative hidden md:block flex-1"><button class="rounded-md px-2 w-full text-left font-medium cursor-default text-xs h-7 transition-colors text-gray-600 dark:text-gray-400 focus:outline-none hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-prime-100 dark:hover:bg-opacity-5 dark:hover:text-gray-50" id="headlessui-listbox-button-undefined" type="button" aria-haspopup="true" aria-expanded="false"><div class="flex items-center gap-2 capitalize"><svg viewBox="0 0 20 20" width="1em" height="1em" fill="currentColor"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path></svg><span>light</span></div></button></div></div></div></div></aside><div id="reach-skip-nav" data-reach-skip-nav-content=""></div><article class="nextra-body relative pb-8 w-full max-w-full flex min-w-0 pr-[calc(env(safe-area-inset-right)-1.5rem)]"><main class="mx-auto max-w-4xl px-6 md:px-8 pt-4 z-10 min-w-0 w-full"><div class="text-sm font-normal flex mt-2.5 text-gray-500 transition-colors cursor-default overflow-hidden"><div class="transition-colors hover:text-gray-900 dark:hover:text-gray-200 text-ellipsis whitespace-nowrap overflow-hidden min-w-[24px]">Documentation</div><span class="mx-2 select-none">/</span><div class="transition-colors hover:text-gray-900 dark:hover:text-gray-200 text-ellipsis whitespace-nowrap overflow-hidden min-w-[24px]">Modules</div><span class="mx-2 select-none">/</span><div class="transition-colors hover:text-gray-900 dark:hover:text-gray-200 text-ellipsis whitespace-nowrap overflow-hidden min-w-[24px]">Authorization</div><span class="mx-2 select-none">/</span><div class="transition-colors hover:text-gray-900 dark:hover:text-gray-200 text-gray-600 dark:text-gray-400">Access Control</div></div><h1>Rockets NestJS Access Control</h1>
<p>Advanced access control guard for NestJS with optional per-request filtering.</p>
<h2><span class="subheading-anchor" id="installation"></span><a href="#installation" class="text-current no-underline no-outline">Installation<span class="anchor-icon" aria-hidden="true">#</span></a></h2>
<p><code>yarn add @concepta/nestjs-access-control</code></p>
<h2><span class="subheading-anchor" id="important"></span><a href="#important" class="text-current no-underline no-outline">IMPORTANT<span class="anchor-icon" aria-hidden="true">#</span></a></h2>
<p>When building your ACL, you need to remember these!</p>
<blockquote>
<p>This module only helps you apply a pattern. There is no magic, you are ultimately responsible for
checking that your ACL works in all contexts.</p>
</blockquote>
<p>Here is the pattern:</p>
<ul>
<li>Giving <code>any</code> access implies that the role IS NOT restricted by ownership, or other rules, to that action/resource combination.</li>
<li>Giving <code>own</code> access implies that the role IS restricted by ownership to that action/resource combination
(it is often required to enforce this rule with a filter to check the data layer when not all information required to
check ownership exists in the parameters or query string.)</li>
</ul>
<p>!!! Important !!!</p>
<blockquote>
<p>All roles that are given <code>any</code> access to a resource will NOT be passed through access filters since <code>any</code> implies they should have all access.</p>
</blockquote>
<h2><span class="subheading-anchor" id="example"></span><a href="#example" class="text-current no-underline no-outline">Example<span class="anchor-icon" aria-hidden="true">#</span></a></h2>
<p>These are very rough examples. We intend to improve them ASAP.</p>
<h3><span class="subheading-anchor" id="simple-user-entity"></span><a href="#simple-user-entity" class="text-current no-underline no-outline">Simple User Entity<span class="anchor-icon" aria-hidden="true">#</span></a></h3>
<div data-rehype-pretty-code-fragment="" data-nextra-code=""><pre><code data-language="typescript" data-theme="default"><span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { Entity</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> Column</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> ManyToMany</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> Unique } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;typeorm&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { Exclude } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;class-transformer&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { Role } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;../auth/role.entity&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-color-text)">@</span><span style="color:var(--shiki-token-function)">Entity</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">@</span><span style="color:var(--shiki-token-function)">Unique</span><span style="color:var(--shiki-color-text)">([</span><span style="color:var(--shiki-token-string-expression)">&#x27;username&#x27;</span><span style="color:var(--shiki-color-text)">])</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">class</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">User</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  @</span><span style="color:var(--shiki-token-function)">Column</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  username</span><span style="color:var(--shiki-token-keyword)">!:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-color-text)">  @</span><span style="color:var(--shiki-token-function)">Column</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  @</span><span style="color:var(--shiki-token-function)">Exclude</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  password</span><span style="color:var(--shiki-token-keyword)">!:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-color-text)">  @</span><span style="color:var(--shiki-token-function)">Column</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  @</span><span style="color:var(--shiki-token-function)">Exclude</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  salt</span><span style="color:var(--shiki-token-keyword)">!:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-color-text)">  @</span><span style="color:var(--shiki-token-function)">ManyToMany</span><span style="color:var(--shiki-color-text)">(() </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> Role</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> (role) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">role</span><span style="color:var(--shiki-color-text)">.users</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    eager</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    onDelete</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;CASCADE&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  })</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  roles</span><span style="color:var(--shiki-token-keyword)">!:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">Role</span><span style="color:var(--shiki-color-text)">[];</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">}</span></span></code></pre></div>
<h3><span class="subheading-anchor" id="your-custom-accesscontrolservice"></span><a href="#your-custom-accesscontrolservice" class="text-current no-underline no-outline">Your custom AccessControlService<span class="anchor-icon" aria-hidden="true">#</span></a></h3>
<div data-rehype-pretty-code-fragment="" data-nextra-code=""><pre><code data-language="typescript" data-theme="default"><span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { AccessControlService } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;nestjs-access-control&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { ExecutionContext</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> UnauthorizedException } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;@nestjs/common&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { User } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;../user/user.entity&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">class</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">ACService</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">implements</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">AccessControlService</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">async</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">getUser</span><span style="color:var(--shiki-color-text)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-color-text)">&gt;(context</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">ExecutionContext</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">Promise</span><span style="color:var(--shiki-color-text)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-color-text)">&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">request</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">context</span><span style="color:var(--shiki-token-function)">.switchToHttp</span><span style="color:var(--shiki-color-text)">()</span><span style="color:var(--shiki-token-function)">.getRequest</span><span style="color:var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">request</span><span style="color:var(--shiki-color-text)">.user </span><span style="color:var(--shiki-token-keyword)">as</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  }</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">async</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">getUserRoles</span><span style="color:var(--shiki-color-text)">(context</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">ExecutionContext</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">Promise</span><span style="color:var(--shiki-color-text)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-color-text)">[]&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">user</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">await</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">this</span><span style="color:var(--shiki-token-function)">.getUser</span><span style="color:var(--shiki-color-text)">&lt;</span><span style="color:var(--shiki-token-function)">User</span><span style="color:var(--shiki-color-text)">&gt;(context);</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-keyword)">!</span><span style="color:var(--shiki-color-text)">user </span><span style="color:var(--shiki-token-keyword)">||</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">!</span><span style="color:var(--shiki-token-constant)">user</span><span style="color:var(--shiki-color-text)">.roles) </span><span style="color:var(--shiki-token-keyword)">throw</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">UnauthorizedException</span><span style="color:var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">user</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">roles</span><span style="color:var(--shiki-token-function)">.map</span><span style="color:var(--shiki-color-text)">((role) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">role</span><span style="color:var(--shiki-color-text)">.name);</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  }</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">}</span></span></code></pre></div>
<h3><span class="subheading-anchor" id="your-custom-acl-rules"></span><a href="#your-custom-acl-rules" class="text-current no-underline no-outline">Your custom ACL rules<span class="anchor-icon" aria-hidden="true">#</span></a></h3>
<div data-rehype-pretty-code-fragment="" data-nextra-code=""><pre><code data-language="typescript" data-theme="default"><span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { AccessControl } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;accesscontrol&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">enum</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">AppRole</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  SuperAdmin </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;SuperAdmin&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  User </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;User&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">enum</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">AppResource</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  User </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;user&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  UserList </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;user-list&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">allResources</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">Object</span><span style="color:var(--shiki-token-function)">.values</span><span style="color:var(--shiki-color-text)">(AppResource);</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">allRoles</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">Object</span><span style="color:var(--shiki-token-function)">.values</span><span style="color:var(--shiki-color-text)">(AppRole);</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">acRules</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">AccessControl</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">AccessControl</span><span style="color:var(--shiki-color-text)">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// admins can do whatever they want</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">acRules</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.grant</span><span style="color:var(--shiki-color-text)">([</span><span style="color:var(--shiki-token-constant)">AppRole</span><span style="color:var(--shiki-color-text)">.SuperAdmin])</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.resource</span><span style="color:var(--shiki-color-text)">(allResources)</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.createOwn</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.createAny</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.readOwn</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.readAny</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.updateOwn</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.updateAny</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.deleteOwn</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.deleteAny</span><span style="color:var(--shiki-color-text)">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// regular users can read self</span></span>
<span class="line"><span style="color:var(--shiki-token-constant)">acRules</span><span style="color:var(--shiki-token-function)">.grant</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">AppRole</span><span style="color:var(--shiki-color-text)">.User)</span><span style="color:var(--shiki-token-function)">.resource</span><span style="color:var(--shiki-color-text)">([</span><span style="color:var(--shiki-token-constant)">AppResource</span><span style="color:var(--shiki-color-text)">.User])</span><span style="color:var(--shiki-token-function)">.readOwn</span><span style="color:var(--shiki-color-text)">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// make sure nobody can delete themselves</span></span>
<span class="line"><span style="color:var(--shiki-token-constant)">acRules</span><span style="color:var(--shiki-token-function)">.deny</span><span style="color:var(--shiki-color-text)">(allRoles)</span><span style="color:var(--shiki-token-function)">.resource</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">AppResource</span><span style="color:var(--shiki-color-text)">.User)</span><span style="color:var(--shiki-token-function)">.deleteOwn</span><span style="color:var(--shiki-color-text)">();</span></span></code></pre></div>
<h3><span class="subheading-anchor" id="import-the-module-into-your-app"></span><a href="#import-the-module-into-your-app" class="text-current no-underline no-outline">Import the module into your app<span class="anchor-icon" aria-hidden="true">#</span></a></h3>
<div data-rehype-pretty-code-fragment="" data-nextra-code=""><pre><code data-language="typescript" data-theme="default"><span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { Module } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;@nestjs/common&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { AppController } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;./app.controller&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { AppService } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;./app.service&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { AccessControlModule } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;nestjs-access-control&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { ACService } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;./modules/auth/access-control.service&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { acRules } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;./app.acl&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-color-text)">@</span><span style="color:var(--shiki-token-function)">Module</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  imports</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">AccessControlModule</span><span style="color:var(--shiki-token-function)">.register</span><span style="color:var(--shiki-color-text)">({ service</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> ACService</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> rules</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> acRules })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  controllers</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [AppController]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  providers</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [AppService]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">})</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">class</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">AppModule</span><span style="color:var(--shiki-color-text)"> {}</span></span></code></pre></div>
<h3><span class="subheading-anchor" id="implement-on-your-controller-nestjsx-crud-module-with-passport-guard-example"></span><a href="#implement-on-your-controller-nestjsx-crud-module-with-passport-guard-example" class="text-current no-underline no-outline">Implement on your controller (nestjsx CRUD module with Passport guard example)<span class="anchor-icon" aria-hidden="true">#</span></a></h3>
<div data-rehype-pretty-code-fragment="" data-nextra-code=""><pre><code data-language="typescript" data-theme="default"><span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { Controller</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> UseGuards } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;@nestjs/common&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { Crud</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> CrudController } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;@nestjsx/crud&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { User } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;./user.entity&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { UserService } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;./user.service&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { ApiBearerAuth</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> ApiOperation</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> ApiTags } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;@nestjs/swagger&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { AuthGuard } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;@nestjs/passport&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { AppResource } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;../../app.acl&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  AccessControlCreateOne</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  AccessControlDeleteOne</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  AccessControlGuard</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  AccessControlReadMany</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  AccessControlReadOne</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  AccessControlUpdateOne</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  UseAccessControl</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">} </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;@concepta/nestjs-access-control&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { UserDto</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> CreateUserDto</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> UpdateUserDto } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;./dto&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> { UserAccessControlFilterService } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;./user-access-control-filter.service&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-color-text)">@</span><span style="color:var(--shiki-token-function)">ApiTags</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">AppResource</span><span style="color:var(--shiki-color-text)">.User)</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">@</span><span style="color:var(--shiki-token-function)">ApiBearerAuth</span><span style="color:var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">@</span><span style="color:var(--shiki-token-function)">Crud</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  model</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    type</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> UserDto</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  dto</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    create</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> CreateUserDto</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    update</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> UpdateUserDto</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  routes</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    only</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-string-expression)">&#x27;getManyBase&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-string-expression)">&#x27;getOneBase&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-string-expression)">&#x27;createOneBase&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-string-expression)">&#x27;updateOneBase&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-string-expression)">&#x27;deleteOneBase&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    getManyBase</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      decorators</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">ApiOperation</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">          operationId</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;user_getMany&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">AccessControlReadMany</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">AppResource</span><span style="color:var(--shiki-color-text)">.UserList)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    getOneBase</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      decorators</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">ApiOperation</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">          operationId</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;user_getOne&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">AccessControlReadOne</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-constant)">AppResource</span><span style="color:var(--shiki-color-text)">.User</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-function)">async</span><span style="color:var(--shiki-color-text)"> (</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">            params: { id</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> string }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">            user: User</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">            service: UserAccessControlFilterService</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">          )</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">Promise</span><span style="color:var(--shiki-color-text)">&lt;</span><span style="color:var(--shiki-token-constant)">boolean</span><span style="color:var(--shiki-color-text)">&gt; </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> (</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">              </span><span style="color:var(--shiki-token-constant)">params</span><span style="color:var(--shiki-color-text)">.id </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">user</span><span style="color:var(--shiki-color-text)">.id </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">service</span><span style="color:var(--shiki-token-function)">.userCanRead</span><span style="color:var(--shiki-color-text)">(id</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> user)</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">            );</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">          }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        )</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    createOneBase</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      decorators</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">ApiOperation</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">          operationId</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;user_createOne&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">AccessControlCreateOne</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">AppResource</span><span style="color:var(--shiki-color-text)">.User)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    updateOneBase</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      decorators</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">ApiOperation</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">          operationId</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;user_updateOne&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">AccessControlUpdateOne</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">AppResource</span><span style="color:var(--shiki-color-text)">.User)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    deleteOneBase</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      decorators</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">ApiOperation</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">          operationId</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;user_deleteOne&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">AccessControlDeleteOne</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">AppResource</span><span style="color:var(--shiki-color-text)">.User)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">      ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">    }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">})</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">@</span><span style="color:var(--shiki-token-function)">Controller</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">AppResource</span><span style="color:var(--shiki-color-text)">.User)</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">@</span><span style="color:var(--shiki-token-function)">UseGuards</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-function)">AuthGuard</span><span style="color:var(--shiki-color-text)">()</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> AccessControlGuard)</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">@</span><span style="color:var(--shiki-token-function)">UseAccessControl</span><span style="color:var(--shiki-color-text)">({ service</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> UserAccessControlFilterService })</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">class</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">UserController</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">implements</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">CrudController</span><span style="color:var(--shiki-color-text)">&lt;</span><span style="color:var(--shiki-token-function)">User</span><span style="color:var(--shiki-color-text)">&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">constructor</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-keyword)">public</span><span style="color:var(--shiki-color-text)"> service</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">UserService</span><span style="color:var(--shiki-color-text)">) {}</span></span>
<span class="line"><span style="color:var(--shiki-color-text)">}</span></span></code></pre></div><div class="pt-8 mt-16 mb-8 border-t dark:border-neutral-800 flex flex-row items-center justify-between"><div class="flex-1 min-w-0"><a class="text-lg font-medium p-4 -m-4 no-underline transition-colors text-gray-600 dark:text-gray-300 dark:hover:text-prime-500 hover:text-prime-500 flex items-center mr-2" title="Access Token" href="/documentation/modules/authorization/nestjs-auth-jwt"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="24" class="transform inline flex-shrink-0 rotate-180 mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>Access Token</a></div><div class="flex-1 min-w-0 text-right"><a class="text-lg font-medium p-4 -m-4 no-underline transition-colors text-gray-600 dark:text-gray-300 dark:hover:text-prime-500 hover:text-prime-500 inline-flex items-center ml-2" title="User" href="/documentation/modules/model/nestjs-user">User<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" height="24" class="transform inline flex-shrink-0 ml-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></a></div></div></main><div class="nextra-toc w-64 hidden xl:block text-sm px-4"><div class="overflow-y-auto pr-4 -mr-4 sticky max-h-[calc(100vh-4rem-env(safe-area-inset-bottom))] top-16 pt-8"><ul><p class="font-semibold tracking-tight mb-4">On This Page</p><li class="scroll-py-6 scroll-my-6"><a href="#installation" class="no-underline inline-block font-semibold text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300">Installation</a></li><li class="scroll-py-6 scroll-my-6"><a href="#important" class="no-underline inline-block font-semibold text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300">IMPORTANT</a></li><li class="scroll-py-6 scroll-my-6"><a href="#example" class="no-underline inline-block font-semibold text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300">Example</a></li><li class="scroll-py-6 scroll-my-6" style="margin-left:1rem"><a href="#simple-user-entity" class="no-underline inline-block text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300">Simple User Entity</a></li><li class="scroll-py-6 scroll-my-6" style="margin-left:1rem"><a href="#your-custom-accesscontrolservice" class="no-underline inline-block text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300">Your custom AccessControlService</a></li><li class="scroll-py-6 scroll-my-6" style="margin-left:1rem"><a href="#your-custom-acl-rules" class="no-underline inline-block text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300">Your custom ACL rules</a></li><li class="scroll-py-6 scroll-my-6" style="margin-left:1rem"><a href="#import-the-module-into-your-app" class="no-underline inline-block text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300">Import the module into your app</a></li><li class="scroll-py-6 scroll-my-6" style="margin-left:1rem"><a href="#implement-on-your-controller-nestjsx-crud-module-with-passport-guard-example" class="no-underline inline-block text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300">Implement on your controller (nestjsx CRUD module with Passport guard example)</a></li></ul><div class="border-t mt-8 pt-8 shadow-[0_-12px_16px_white] dark:shadow-[0_-12px_16px_#111] bg-white dark:bg-dark sticky pb-8 bottom-0 dark:border-neutral-800"><a class="text-xs font-medium no-underline block text-gray-500 mb-2 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100" href="https://github.com/conceptadev/rockets/blob/main/pages/documentation/modules/authorization/nestjs-access-control.md" target="_blank" rel="noreferrer">Edit this page on GitHub</a></div></div></div></article></div></div><footer class="bg-gray-100 dark:bg-neutral-900 pb-[env(safe-area-inset-bottom)]"><div class="py-2 border-b dark:border-neutral-800 md:hidden"><div class="max-w-[90rem] mx-auto"><div class="inline-flex px-4"><div class="grow-0 relative"><button class="rounded-md px-2 w-full text-left font-medium cursor-default text-xs h-7 transition-colors text-gray-600 dark:text-gray-400 focus:outline-none hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-prime-100 dark:hover:bg-opacity-5 dark:hover:text-gray-50" id="headlessui-listbox-button-undefined" type="button" aria-haspopup="true" aria-expanded="false"><div class="flex items-center gap-2 capitalize"><svg viewBox="0 0 20 20" width="1em" height="1em" fill="currentColor"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path></svg><span>light</span></div></button></div></div></div></div><div class="max-w-[90rem] mx-auto pl-[max(env(safe-area-inset-left),1.5rem)] pr-[max(env(safe-area-inset-right),1.5rem)] py-12"><div class="flex justify-between flex-col-reverse md:flex-row items-center md:items-end"><span class="text-gray-600 dark:text-gray-400"><span>2022 © <a href="https://conceptatech.com" target="_blank" rel="noreferrer"> Concepta</a></span></span><div class="mt-6"></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/documentation/modules/authorization/nestjs-access-control","query":{},"buildId":"wxhLgjVNyYNjLMWWwdW-9","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>